{% extends "base.html" %}
{% load static %}


{% block css %}
<link rel="stylesheet" href="{% static 'css/order.css' %}">
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.css">
{% endblock %}

{% block content %}
<div class="order-container">
    <div id="formTitles" class="row form-titles">
        <span class="d-none d-sm-block text-center d col-sm-4"><strong>Product</strong></span>
        <span class="d-none d-sm-block text-center d col-sm-4"><strong>Price</strong></span>
        <span class="d-none d-sm-block text-center d col-sm-4"><strong>Quantity</strong></span>
    </div>
    <form method="post">
        {% csrf_token %}
        <div id="order" class="form-card order">
            {% for product in products %}
            <div class="row product-card align-items-center my-2">
                <div class="col-sm-4 col-6 text-center">
                    <label for="{{ product.name }}">{{ product.name }}</label>
                    <input type="hidden" name="data-product-id" value="{{ product.id }}">
                    <input type="hidden" name="{{ product.name }}">
                </div>
                <div class="col-sm-4 col-6 text-center">
                    £<span>{{ product.price }}</span>
                    <div class="custom-hr">
                        <hr>
                    </div>
                </div>
                <div class="col-6 p-0 col-sm-4 offset-6 offset-sm-0 text-center">
                    <button type="button" class="dec-btn" onclick="decQuantity(event)">-</button>
                    <input type="number" class="text-center qty-input" name="quantity" min="0" value="0">
                    <button type="button" class="inc-btn" onclick="incQuantity(event)" id="incBtn">+</button>
                </div>
            </div>
            {% endfor %}
        </div>

        <div id="details" class="form-card details">
            <div class="row no-gutters">
                <!-- First div -->
                <div class="col-lg-6 col-sm-12 text-center mb-5">
                    <h3 class="mb-2 mt-2">Order Summary</h3>
                    <table id="orderTable" class="order-table">
                        <thead>
                            <tr class="text-center">
                                <th>Product</th>
                                <th>Price</th>
                                <th>Quantity</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Table body will be dynamically generated using JavaScript -->
                        </tbody>
                    </table>
                    <div class="mt-5">total:  £ <span id="total"></span></div>
                </div>
        
                <!-- Second div -->
                <div class="col-lg-6 col-sm-12 text-center form-card mb-5 address-inputs">
                    <h3 class="mb-2 mt-2" >Address</h3>
                    <input type="text" required name="address_line1" placeholder="Address Line 1">
                    <input type="text" name="address_line2" placeholder="Address Line 2">
                    <input type="text" name="address_line3" placeholder="Address Line 3">
                    <input type="text" required name="postcode" placeholder="Post Code">
                    <input type="text" name="delivery_instructions" placeholder="Delivery notes...">
                    <div class="date-time">
                        <input type="text" required placeholder="Select delivery date.." id="futureDate">
                        <input type="text" hidden name="delivery_date" id="futureDateFormatted">
                        <input type="text" required name="delivery_time" placeholder="Select delivery time.." id="timepicker">
                    </div>
                </div>
            </div>

            <button type="submit" onclick="formSubmit()">Submit</button>
        </div>
    </form>
    <button id="prevBtn" type="button" onclick="prevStep()" class="prev-btn">Previous</button>
    <button id="nextBtn" type="button" onclick="nextStep()" disabled class="next-btn">Next</button>
</div>

{% block javascript %}
<script src="{% static 'js/orderForm.js' %}"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.js"></script>
{% endblock %}

{% endblock %}